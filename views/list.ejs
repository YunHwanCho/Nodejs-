<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/main.css" />
  </head>
  <body class="grey-bg">
    <%- include('nav.ejs') %>

    <!-- <%= JSON.stringify(ê¸€ëª©ë¡) %> -->

    <div class="white-bg">
      <%for(let i = 0; i < ê¸€ëª©ë¡.length; i++) { %>
      <div class="list-box">
        <h4>
          <a href="/detail/<%= ê¸€ëª©ë¡[i]._id %>"> <%= ê¸€ëª©ë¡[i].title %> </a>
          <a href="/edit/<%= ê¸€ëª©ë¡[i]._id%>">âœï¸</a>
          <span class="delete" data-id="<%= ê¸€ëª©ë¡[i]._id %>">ğŸ—‘ï¸</span>
        </h4>
        <p><%=ê¸€ëª©ë¡[i].content%></p>
        <button
          type="button"
          class="btn btn-warning"
          action="/delete"
          method="POST"
        >
          ì‚­ì œ
        </button>
        <button type="button" class="btn btn-info delete">
          <a href="/edit/<%=ê¸€ëª©ë¡[i]._id%>">ìˆ˜ì •</a>
        </button>
      </div>

      <%}%>
    </div>

    <script>
        document.querySelectorAll('.delete').forEach(function(deleteButton){
            deleteButton.addEventListener('click',function(e) {
          fetch('/delete?docid=' + e.target.dataset.id, {
          method : 'DELETE',
        });
        });
    });


    </script>
  </body>
</html>
